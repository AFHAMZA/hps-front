<app-navbar />
<section class="bg-primary position-relative" style="background-color: #1a237e;">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-12">
        <h2 class="ipt-title text-light">WhatsAPI Token Instructions</h2>
        <span class="ipn-subtitle">How to safely use your WhatsAPI token</span>
      </div>
    </div>
  </div>
  <div class="ht-30"></div>
</section>



<section class="gray-simple">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-10">
        <div class="card rounded-3 shadow p-4">
          <h3 class="mb-3"><i class="bi bi-gear-fill me-2"></i>Getting Started</h3>
          <p>
            Your WhatsAPI token enables programmatic WhatsApp messaging. Follow these steps to use it securely and effectively.
          </p>

          <h4 class="mt-4">Steps to Use Your API Token</h4>
          <ol>
            <li>
              <strong>Generate a Token:</strong> Visit the <a routerLink="/token">Tokens</a> page, log in, and click "Generate API Token".
            </li>
            <li>
              <strong>Save Securely:</strong> Store the token in:
              <ul>
                <li>An environment variable (e.g., <code>.env</code>: <code>API_TOKEN=your-token</code>).</li>
                <li>A vault service (e.g., AWS Secrets Manager).</li>
                <li><strong>Never</strong> store in public code or emails.</li>
              </ul>
            </li>
            <li>
              <strong>Use HTTPS:</strong> Send API requests over HTTPS to encrypt your token.
            </li>
            <li>
              <strong>Send in Header:</strong> Include the token in the <code>X-API-Token</code> header:
              <pre><code>X-API-Token: 550e8400-e29b-41d4-a716-446655440000</code></pre>
            </li>
            <li>
              <strong>Monitor Usage:</strong> Check sent messages for unauthorized activity.
            </li>
            <li>
              <strong>Revoke if Leaked:</strong> Revoke compromised tokens on the <a routerLink="/token">Tokens</a> page.
            </li>
          </ol>

          <div class="alert alert-warning mt-4">
            <strong>Important:</strong> Never share your token. Revoke it immediately if exposed.
          </div>

          <h4 class="mt-4"><i class="bi bi-envelope-fill me-2"></i>Sending Bulk Messages</h4>
          <p>
            To send messages to multiple recipients, follow these best practices:
          </p>
          <ul>
            <li><strong>Use Batching:</strong> Send in batches (e.g., 10-20 messages) with 5-10 second delays.</li>
            <li><strong>Randomize Messages:</strong> Use varied templates to avoid spam flags:
              <pre><code>{{code1}}</code></pre>
            </li>
            <li><strong>Schedule Sending:</strong> Send during 9 AM - 5 PM local time.</li>
            <li><strong>Respect Limits:</strong> Stay within 100 requests per 15 minutes.</li>
            <li><strong>Track Failures:</strong> Handle errors (e.g., invalid numbers) and retry.</li>
            <li><strong>Obtain Consent:</strong> Ensure recipients have opted in.</li>
          </ul>

          <h4 class="mt-4"><i class="bi bi-exclamation-triangle-fill me-2"></i>Handling API Errors</h4>
          <p>
            Common API errors and how to handle them:
          </p>
          <ul>
            <li><strong>400 Bad Request:</strong> Check your request body (e.g., missing <code>phone</code> or <code>message</code>). Example:
              <pre><code>{{code3}}</code></pre>
            </li>
            <li><strong>401 Unauthorized:</strong> Invalid or missing <code>X-API-Token</code>. Verify your token or generate a new one.</li>
            <li><strong>429 Too Many Requests:</strong> You’ve hit the rate limit. Wait 15 minutes or reduce your request frequency.</li>
            <li><strong>500 Server Error:</strong> Contact support with the error details and your logs.</li>
          </ul>
          <div class="alert alert-danger mt-3">
            <strong>Tip:</strong> Log all API responses to debug issues. Use tools like Postman to test requests.
          </div>

          <h4 class="mt-4"><i class="bi bi-code-slash me-2"></i>Example API Request</h4>
          <p>Send a WhatsApp message:</p>
          <pre><code>{{code2}}</code></pre>
          <div *ngIf="copySuccess" class="alert alert-success text-center">
            Code copied to clipboard!
          </div>
          <button class="btn btn-outline-primary btn-sm mt-2" (click)="copyCurlExample()">Copy Code</button>

          <h4 class="mt-4"><i class="bi bi-question-circle-fill me-2"></i>Frequently Asked Questions</h4>
          <div class="accordion" id="faqAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header" id="faq1">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                  How do I know if my WhatsApp is connected?
                </button>
              </h2>
              <div id="collapse1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  Go to the <a routerLink="/token">Tokens</a> page. If your WhatsApp is connected, you’ll see your tokens. If not, scan the QR code to connect.
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="faq2">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                  What is the rate limit?
                </button>
              </h2>
              <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  You can send up to 100 requests per 15 minutes. Exceeding this triggers a 429 error. Plan your bulk sends accordingly.
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="faq3">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                  What if my token is leaked?
                </button>
              </h2>
              <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  Revoke the token immediately on the <a routerLink="/token">Tokens</a> page and generate a new one. Contact support if you notice unauthorized activity.
                </div>
              </div>
            </div>
          </div>

          <h4 class="mt-4"><i class="bi bi-file-earmark-text-fill me-2"></i>API Documentation</h4>
          <p>Download our full API documentation for detailed endpoint information:</p>
          <button class="btn btn-primary mt-2" (click)="downloadApiDocs()">Download API Docs (PDF)</button>

          <h4 class="mt-4">Best Practices</h4>
          <ul>
            <li>Store tokens in environment variables or a secrets manager.</li>
            <li>Avoid hardcoding tokens in frontend code.</li>
            <li>Send messages during 9 AM - 5 PM to avoid flagging.</li>
            <li>Ensure recipients have opted in.</li>
            <li>Contact support for assistance.</li>
          </ul>

          <div class="text-center mt-4">
            <a routerLink="/token" class="btn btn-primary">Manage Your Tokens</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<app-footer-top [bg]="'theme-bg'" />
<app-footer />